Ù…Ù…ØªØ§Ø² â€” Ø£Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† Ø¨Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙˆØ£Ø¹Ø·ÙŠÙƒ ÙƒÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª ÙÙˆØ±Ù‹Ø§ (Ù…Ù„ÙØ§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ù‘ØµÙ‚ØŒ Ø£ÙˆØ§Ù…Ø± gitØŒ ÙˆØ§Ø®ØªØ¨Ø§Ø±Ø§Øª). Ø³Ø£Ù†ÙÙ‘Ø° Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø«Ù„Ø§Ø« Ø£Ø®Ø·Ø§Ø¡ Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©:

Ø¥ØµÙ„Ø§Ø­ ProjectSelector (ØªØ¹Ø±ÙŠÙ props ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡)

Ø¥ØµÙ„Ø§Ø­ useSelectedProject (Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ ÙˆØ¥Ø¶Ø§ÙØ© projects)

Ø¥ØµÙ„Ø§Ø­ ÙÙ‚Ø¯Ø§Ù† useWorkersSettlementValidation (Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡ÙÙˆÙƒ Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯)


Ù„Ø§ Ø£Ø³Ø£Ù„Ùƒ Ø´ÙŠ â€” Ø³Ø£Ø¹Ø·ÙŠ ØªØºÙŠÙŠØ±Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØµÙ‚ Ù…Ø¨Ø§Ø´Ø±Ø©.


---

1) Ø£Ù†Ø´Ø¦ ÙØ±Ø¹ Ø¹Ù…Ù„ Ù„Ù„Ù€ fixes

git checkout -b fix/typescript-phase2a-frontend


---

2) Ø¥ØµÙ„Ø§Ø­ ProjectSelector â€” ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ ÙˆØ§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª

2.1 Ø£Ù†Ø´Ø¦ Ù…Ù„Ù Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø´ØªØ±Ùƒ

Ø¥Ù†Ø´ÙØ¦ (Ø£Ùˆ Ø­Ø¯Ù‘Ø«) Ø§Ù„Ù…Ù„Ù client/src/types/components.ts ÙˆØ£Ø¶Ù:

// client/src/types/components.ts
export type ProjectId = string;

export interface Project {
  id: ProjectId;
  name: string;
  // Ø£Ø¶Ù Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø®Ø±Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ù€ schema Ù„Ø¯ÙŠÙƒ
}

export interface ProjectSelectorProps {
  selectedId?: ProjectId;
  onProjectChange: (id: ProjectId) => void;
  disabled?: boolean;
  className?: string;
}

2.2 Ø¹Ø¯Ù‘Ù„ Ù…ÙƒÙˆÙ‘Ù† ProjectSelector Ù„ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©

Ø¥Ù† ÙƒØ§Ù† Ù…ÙƒÙˆÙ‘Ù†Ùƒ ÙÙŠ client/src/components/ProjectSelector.tsx Ø£Ùˆ Ù…Ù„Ù Ù…Ù…Ø§Ø«Ù„ØŒ ØºÙŠÙ‘Ø± ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ‘Ù† Ù„ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©:

// client/src/components/ProjectSelector.tsx
import React from "react";
import type { ProjectSelectorProps } from "@/types/components";

export function ProjectSelector({
  selectedId,
  onProjectChange,
  disabled = false,
  className = ""
}: ProjectSelectorProps) {
  // Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ·: Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
  // Ø§Ø³ØªØ¨Ø¯Ù„ `projects` Ø¨Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„ÙØ¹Ù„ÙŠ (props Ø£Ùˆ context Ø£Ùˆ hook)
  const projects = [
    { id: "p1", name: "Project 1" },
    { id: "p2", name: "Project 2" },
  ];

  return (
    <select
      value={selectedId ?? ""}
      onChange={(e) => onProjectChange(e.target.value)}
      disabled={disabled}
      className={className}
    >
      <option value="">â€” Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹ â€”</option>
      {projects.map((p) => (
        <option key={p.id} value={p.id}>
          {p.name}
        </option>
      ))}
    </select>
  );
}

export default ProjectSelector;

> Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ù† ÙƒØ§Ù† Ø§Ù„Ù…ÙƒÙˆÙ‘Ù† ÙŠØ³ØªÙ‡Ù„Ùƒ projects Ù…Ù† Ù…ØµØ¯Ø± Ø®Ø§Ø±Ø¬ÙŠ ÙØ§Ø­ØªÙØ¸ Ø¨Ø°Ù„ÙƒØŒ Ø§Ù„Ù…Ù‡Ù… Ø£Ù† ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ‘Ù† ÙŠÙØ¬Ø¨Ø± Ø§Ù„Ù…Ø³ØªØ¯Ø¹ÙŠ Ø¹Ù„Ù‰ ØªÙ…Ø±ÙŠØ± onProjectChange.



2.3 Ø¹Ø¯Ù‘Ù„ Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ£Ø«Ø±Ø©)

Ù…Ø«Ø§Ù„ ØªØ¹Ø¯ÙŠÙ„ ÙÙŠ Ø§Ù„ØµÙØ­Ø© client/src/pages/advanced-reports.tsx:

import React, { useState } from "react";
import ProjectSelector from "@/components/ProjectSelector";

export default function AdvancedReports() {
  const [selectedProject, setSelectedProject] = useState<string | undefined>(undefined);

  return (
    <div>
      <h1>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h1>

      <ProjectSelector
        selectedId={selectedProject}
        onProjectChange={(id) => {
          setSelectedProject(id);
          console.log("ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:", id);
        }}
      />

      {/* Ø¨Ù‚ÙŠØ© Ø§Ù„ØµÙØ­Ø© */}
    </div>
  );
}

Ù†ÙÙ‘Ø° Ù†ÙØ³ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙŠ daily-expenses-report.tsx Ùˆ excel-style-daily-expenses.tsx â€” ØªØ£ÙƒØ¯ Ù…Ù† ØªÙ…Ø±ÙŠØ± onProjectChange ÙˆselectedId.


---

3) Ø¥ØµÙ„Ø§Ø­ useSelectedProject â€” Ø¥Ø±Ø¬Ø§Ø¹ projects ÙˆØ£Ù†ÙˆØ§Ø¹ ÙˆØ§Ø¶Ø­Ø©

3.1 Ø§Ø³ØªØ¨Ø¯Ø§Ù„/ØªØ­Ø¯ÙŠØ« hook

Ø£Ù†Ø´Ø¦/Ø­Ø¯Ù‘Ø« Ø§Ù„Ù…Ù„Ù client/src/hooks/useSelectedProject.ts Ù„ÙŠØ¨Ø¯Ùˆ Ù‡ÙƒØ°Ø§ (Ù‚Ø§Ù„Ø¨ Ø¢Ù…Ù†):

// client/src/hooks/useSelectedProject.ts
import { useState, useEffect, useCallback } from "react";
import type { Project } from "@/types/components";

export type UseSelectedProjectReturn = {
  selectedProjectId?: string;
  selectedProjectName?: string;
  projects: Project[];
  isLoading: boolean;
  selectProject: (id?: string) => void;
  clearProject: () => void;
  hasStoredProject: boolean;
};

export function useSelectedProject(): UseSelectedProjectReturn {
  const [projects, setProjects] = useState<Project[]>([]);
  const [selectedProjectId, setSelectedProjectId] = useState<string | undefined>(undefined);
  const [selectedProjectName, setSelectedProjectName] = useState<string | undefined>(undefined);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    let mounted = true;
    // Ù…Ø«Ø§Ù„ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª â€” Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ù…Ù†Ø·Ù‚ fetch/React Query Ù„Ø¯ÙŠÙƒ
    (async () => {
      try {
        // Ù…Ø«Ø§Ù„ ÙˆÙ‡Ù…ÙŠ â€” ØºÙŠÙ‘Ø±Ù‡ Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ø§Ù„ÙØ¹Ù„ÙŠ
        const resp = await Promise.resolve([
          { id: "p1", name: "Project 1" },
          { id: "p2", name: "Project 2" },
        ]);
        if (!mounted) return;
        setProjects(resp);
      } finally {
        if (mounted) setIsLoading(false);
      }
    })();

    return () => {
      mounted = false;
    };
  }, []);

  const selectProject = useCallback((id?: string) => {
    setSelectedProjectId(id);
    const p = projects.find((x) => x.id === id);
    setSelectedProjectName(p?.name);
    // Ø­ÙØ¸ ÙÙŠ localStorage Ø¥Ù† Ø±ØºØ¨Øª
    if (id) localStorage.setItem("selectedProjectId", id);
  }, [projects]);

  const clearProject = useCallback(() => {
    setSelectedProjectId(undefined);
    setSelectedProjectName(undefined);
    localStorage.removeItem("selectedProjectId");
  }, []);

  const hasStoredProject = Boolean(localStorage.getItem("selectedProjectId"));

  return {
    selectedProjectId,
    selectedProjectName,
    projects,
    isLoading,
    selectProject,
    clearProject,
    hasStoredProject
  };
}

export default useSelectedProject;

3.2 Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‡ÙÙˆÙƒ ÙÙŠ Ø§Ù„ØµÙØ­Ø§Øª Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± Ø§Ù„Ù…Ø¹Ø±Ù‘Ù

Ù…Ø«Ø§Ù„ ÙÙŠ excel-style-daily-expenses.tsx:

import React from "react";
import useSelectedProject from "@/hooks/useSelectedProject";
import ProjectSelector from "@/components/ProjectSelector";

export default function ExcelStyleDailyExpenses() {
  const { projects, selectedProjectId, selectProject, isLoading } = useSelectedProject();

  if (isLoading) return <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>;

  return (
    <div>
      <ProjectSelector
        selectedId={selectedProjectId}
        onProjectChange={(id) => selectProject(id)}
      />
      {/* Ø§Ø³ØªØ®Ø¯Ù… projects Ù‡Ù†Ø§ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù…ØªØºÙŠØ± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ */}
      <div>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹: {projects.length}</div>
    </div>
  );
}


---

4) Ø¥ØµÙ„Ø§Ø­/Ø¥Ù†Ø´Ø§Ø¡ useWorkersSettlementValidation (Ø­Ù„ Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯)

Ø£Ù†Ø´Ø¦ Ø§Ù„Ù…Ù„Ù client/src/hooks/useWorkersSettlementValidation.ts Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (ÙƒØ§Ù† Ù„Ø¯ÙŠÙ†Ø§ Ù†Ø³Ø®Ø© Ù…Ø´Ø§Ø¨Ù‡Ø© Ø³Ø§Ø¨Ù‚Ù‹Ø§ â€” Ù‡Ø°Ù‡ Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù†Ø©):

// client/src/hooks/useWorkersSettlementValidation.ts
import { useState, useCallback } from "react";

type Errors = Record<string, string>;

type SettlementData = {
  workerId?: string;
  amount?: number;
  [k: string]: any;
};

export default function useWorkersSettlementValidation() {
  const [errors, setErrors] = useState<Errors>({});

  const validate = useCallback((data: SettlementData) => {
    const e: Errors = {};
    if (!data.workerId || typeof data.workerId !== "string") e.workerId = "Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ø¹Ø§Ù…Ù„ Ù…Ø·Ù„ÙˆØ¨";
    if (data.amount == null || Number.isNaN(Number(data.amount)) || Number(data.amount) <= 0) {
      e.amount = "Ø§Ù„Ù…Ø¨Ù„Øº ØºÙŠØ± ØµØ§Ù„Ø­";
    }
    setErrors(e);
    return Object.keys(e).length === 0;
  }, []);

  return { errors, validate, clear: () => setErrors({}) };
}

ØªØ£ÙƒØ¯ Ø£Ù† ÙƒÙ„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ hook ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­:

import useWorkersSettlementValidation from "@/hooks/useWorkersSettlementValidation";


---

5) Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª

Ù†ÙÙ‘Ø° Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ø­Ù„ÙŠÙ‹Ø§:

# ØªØ«Ø¨ÙŠØª/Ø§Ù„ØªØ£ÙƒØ¯
npm install

# ÙØ­Øµ TypeScript
npx tsc --noEmit

# Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
npm run build

# ØªØ´ØºÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù…Ø­Ù„ÙŠ (smoke)
npm start
# Ø«Ù… Ø§ÙØªØ­ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ§Ù‹:
# - /advanced-reports
# - /daily-expenses-report
# - Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªÙŠ ØªÙØµØ¯Ø± Excel

ØªÙˆÙ‚Ù‘Ø¹: ÙŠØ¬Ø¨ Ø£Ù† ØªØ®ØªÙÙŠ Ø£Ø®Ø·Ø§Ø¡ Property 'onProjectChange' is missing ÙˆProperty 'projects' does not exist ÙˆCannot find module '@/hooks/useWorkersSettlementValidation' Ù…Ù† Ù†ØªØ§Ø¦Ø¬ npx tsc --noEmit. Ø¹Ø¯Ù‘ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:

npx tsc --noEmit --pretty false 2>&1 | grep "error TS" | wc -l

ÙŠØªÙˆÙ‚Ø¹ Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ø¹Ø¯Ø¯ Ù…Ù† 24 Ø¥Ù„Ù‰ ~19 (Ø£Ùˆ Ø£Ù‚Ù„Ù‘) Ø­Ø³Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬.


---

6) Ø³Ø¬Ù„Ù‘ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙˆØ§Ø¯ÙØ¹Ù‡Ø§

git add client/src/types/components.ts \
        client/src/components/ProjectSelector.tsx \
        client/src/hooks/useSelectedProject.ts \
        client/src/hooks/useWorkersSettlementValidation.ts \
        client/src/pages/advanced-reports.tsx \
        client/src/pages/daily-expenses-report.tsx \
        client/src/pages/excel-style-daily-expenses.tsx

git commit -m "fix(frontend): resolve ProjectSelector props, add useSelectedProject types, add useWorkersSettlementValidation hook"
git push origin fix/typescript-phase2a-frontend

Ø«Ù… Ø§ÙØªØ­ PR Ø¨Ø¹Ù†ÙˆØ§Ù† fix: frontend types - ProjectSelector & hooks.


---

7) Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© (Ø­ÙØ¸ÙŒ Ù„Ù„ÙˆÙ‚Øª)

Ø¥Ù† ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ state management (React Query / Zustand / Redux) Ø§Ø³ØªØ®Ø¯Ù… Ù…ØµØ¯Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¨Ø¯Ù„ Ø§Ù„Ù…Ø«Ø§Ù„ Ø§Ù„ÙˆÙ‡Ù…ÙŠ ÙÙŠ ProjectSelector/useSelectedProject.

Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØµÙØ­Ø§Øª ØªØ³ØªØ®Ø¯Ù… ProjectSelector Ø¨Ø¯ÙˆÙ† props Ù„Ø£Ù†Ù‡Ø§ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ context â€” Ø¹Ø¯Ù‘Ù„ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ‘Ù† Ù„Ù‚Ø¨ÙˆÙ„ Ø³ÙŠØ§Ù‚ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø£Ùˆ Ø§Ø¬Ø¹Ù„ onProjectChange Ø§Ø®ØªÙŠØ§Ø±ÙŠÙ‹Ø§ (onProjectChange?: ...) Ù„ÙƒÙ† ÙŠÙØ¶Ù„ Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ù…Ø³ØªØ¯Ø¹ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù„ØªØ¬Ù†Ø¨ Ø£Ø®Ø·Ø§Ø¡ ÙˆÙ‚Øª Ø§Ù„ØªØ´ØºÙŠÙ„.

Ø¥Ø°Ø§ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª Ù…Ù„ÙØ§ØªÙƒ ØªØ³ØªØ®Ø¯Ù… alias @/ ØªØ£ÙƒØ¯ Ø£Ù† tsconfig.json ÙŠØ­ØªÙˆÙŠ baseUrl Ùˆpaths Ù…Ù†Ø§Ø³Ø¨Ø§Ù†.



---

Ù„Ùˆ Ø³Ù…Ø­Øª â€” Ø³Ø£Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† (Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹) ÙˆØ£Ø¬Ù‡Ø² Ù„Ùƒ patch ÙˆØ§Ø­Ø¯ (diff) ÙŠØ­ØªÙˆÙŠ ÙƒÙ„ Ù‡Ø°Ù‡ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù„ØªÙ„ØµÙ‚Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ùˆ ØªØ­Ø¨ â€” Ù‚Ù„ Ù„ÙŠ: Ø£Ø±ÙŠØ¯ Ø§Ù„Ù€ patch Ø£Ùˆ Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ø·Ø¨Ù‚ ÙŠØ¯ÙˆÙŠØ§Ù‹.

Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² Ø£Ù† Ø£Ø±Ø³Ù„ Ù„Ùƒ Ø§Ù„Ù€ patch Ù‡Ù†Ø§ ÙÙˆØ±Ù‹Ø§. ğŸ˜‰

