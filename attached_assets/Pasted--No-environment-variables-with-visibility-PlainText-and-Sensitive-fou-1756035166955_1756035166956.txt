لحل مشكلة ظهور الرسالة:

> "No environment variables with visibility 'PlainText' and 'Sensitive' found for the 'production' environment on EAS"



عليك اتباع الخطوات التالية لضمان توافر متغيرات البيئة المناسبة على منصة EAS السحابية:


---

1. تأكد من رفع متغيرات البيئة إلى خادم EAS

ادخل إلى لوحة التحكم في Expo (Dashboard)، ضمن مشروعك، وانتقل إلى صفحة Environment Variables.

أنشئ المتغيرات المطلوبة (مثل API_URL، EXPO_PUBLIC_API_URL، وغيرها) واختر لها نطاق البيئة المناسب مثل production أو all environments .

يجب تحديد نوع الرؤية (Visibility):

Plain text: يظهر في واجهة المستخدم وCLI والسجلات.

Sensitive: يخفي من السجلات ويظهر عبر CLI مع إمكانية التبديل في الواجهة .


إذا كنت ترفع ملف مثل google-services.json أو GoogleService-Info.plist، استخدم النوع file مع eas env:create .



---

2. تأكد من إعداد eas.json بشكل صحيح لبيئة الإنتاج

في ملف eas.json، تحت ملف التعريف (profile) الخاص بـ production، أضف خاصية "environment": "production" لربط الملف بالبيانات المرفوعة على EAS .

مثال:

{
  "build": {
    "production": {
      "environment": "production",
      // ... الإعدادات الأخرى للبناء
    }
  }
}


---

3. مزامنة البيئة محليًا للاختبار والتطوير

استخدم الأمر التالي لسحب متغيرات البيئة (غير السرية) إلى ملف محلي:

eas env:pull --environment production

هذا ينشئ لك ملف .env يحتوي على المتغيرات التي يمكن استخدامها محليًا .



---

4. إذا كنت تستخدم CI/CD مثل GitHub Actions:

بناءً على التعليمات من Stack Overflow:

يمكن تخزين المتغيرات الحساسة (Sensitive) أو السرية (Secret) في EAS Secrets.

المتغيرات التي ترفع باستخدام --env أو في eas.json يمكن أن تُدمج وتُستخدم أثناء البناء، والأولوية تكون لـ EAS Secrets في حال التعارض .




---

5. نصائح إضافية هامة

لا تستخدم اسماء متغيرات تبدأ بـ EXPO_PUBLIC_ للمتغيرات الحساسة أو السرية، لأن هذه ستُضمن في تطبيقك النهائي بشكلٍ يمكن لأي مستخدم الوصول إليه .

تأكد من أن .env لا يُرفع إلى Git (أضفه إلى .gitignore) لتفادي التسريب.

إصدار CLI: في حال كنت تستخدم إصدار قديم (< 13.3.0)، قد تُفترض بيئة production تلقائيًا لجميع البنيات، لذا تأكد من التحديث إن لزم الأمر .



---

ملخص سريع:

الخطوة	المهمة

1	رفع متغيرات البيئة من نوع PlainText أو Sensitive إلى EAS ضمن بيئة production
2	ضمان وجود "environment": "production" في eas.json
3	سحب المتغيرات محليًا عبر eas env:pull
4	في حال المُزامنة مع CI/CD، تأكد من استخدام EAS Secrets ضمن البناء
5	لا تستخدم EXPO_PUBLIC_ للسرية، وتأكد من إعداد .gitignore بشكل صحيح



---

هل ترغب أن أساعدك بخطوات عملية لإنشاء متغير معين أو تنفيذ أمر معيّن؟

